{"remainingRequest":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\bot-h5\\bot-ui\\src\\router\\index.js","dependencies":[{"path":"D:\\workspace\\bot-h5\\bot-ui\\src\\router\\index.js","mtime":1702475008413},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBMb2dpbiBmcm9tICdAL3ZpZXdzL0xvZ2luJzsKaW1wb3J0IE5vdEZvdW5kIGZyb20gJ0Avdmlld3MvNDA0JzsKaW1wb3J0IEhvbWUgZnJvbSAnQC92aWV3cy9Ib21lJzsKaW1wb3J0IEludHJvIGZyb20gJ0Avdmlld3MvSW50cm8vSW50cm8nOwppbXBvcnQgYXBpIGZyb20gJ0AvaHR0cC9hcGknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IGdldElGcmFtZVBhdGgsIGdldElGcmFtZVVybCB9IGZyb20gJ0AvdXRpbHMvaWZyYW1lJzsKdmFyIG9yaWdpbmFsUHVzaCA9IFJvdXRlci5wcm90b3R5cGUucHVzaDsKClJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2gobG9jYXRpb24pIHsKICByZXR1cm4gb3JpZ2luYWxQdXNoLmNhbGwodGhpcywgbG9jYXRpb24pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiBlcnI7CiAgfSk7Cn07CgpWdWUudXNlKFJvdXRlcik7CnZhciByb3V0ZXIgPSBuZXcgUm91dGVyKHsKICByb3V0ZXM6IFt7CiAgICBwYXRoOiAnLycsCiAgICBuYW1lOiAn6aaW6aG1JywKICAgIGNvbXBvbmVudDogSG9tZSwKICAgIGNoaWxkcmVuOiBbewogICAgICBwYXRoOiAnJywKICAgICAgbmFtZTogJ+ezu+e7n+S7i+e7jScsCiAgICAgIGNvbXBvbmVudDogSW50cm8sCiAgICAgIG1ldGE6IHsKICAgICAgICBpY29uOiAnZmEgZmEtaG9tZSBmYS1sZycsCiAgICAgICAgaW5kZXg6IDAKICAgICAgfQogICAgfV0KICB9LCB7CiAgICBwYXRoOiAnL2xvZ2luJywKICAgIG5hbWU6ICfnmbvlvZUnLAogICAgY29tcG9uZW50OiBMb2dpbiwKICAgIG1ldGE6IHsKICAgICAgdGl0bGU6ICfnrqHnkIbns7vnu58nCiAgICB9CiAgfSwgewogICAgcGF0aDogJy80MDQnLAogICAgbmFtZTogJ25vdEZvdW5kJywKICAgIGNvbXBvbmVudDogTm90Rm91bmQKICB9XQp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8g55m75b2V55WM6Z2i55m75b2V5oiQ5Yqf5LmL5ZCO77yM5Lya5oqK55So5oi35L+h5oGv5L+d5a2Y5Zyo5Lya6K+dCiAgLy8g5a2Y5Zyo5pe26Ze05Li65Lya6K+d55Sf5ZG95ZGo5pyf77yM6aG16Z2i5YWz6Zet5Y2z5aSx5pWI44CCCiAgdmFyIHVzZXJOYW1lID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpOwoKICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicpIHsKICAgIC8vIOWmguaenOaYr+iuv+mXrueZu+W9leeVjOmdou+8jOWmguaenOeUqOaIt+S8muivneS/oeaBr+WtmOWcqO+8jOS7o+ihqOW3sueZu+W9lei/h++8jOi3s+i9rOWIsOS4u+mhtQogICAgaWYgKHVzZXJOYW1lKSB7CiAgICAgIG5leHQoewogICAgICAgIHBhdGg6ICcvJwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKCF1c2VyTmFtZSkgewogICAgICAvLyDlpoLmnpzorr/pl67pnZ7nmbvlvZXnlYzpnaLvvIzkuJTmiLfkvJror53kv6Hmga/kuI3lrZjlnKjvvIzku6PooajmnKrnmbvlvZXvvIzliJnot7PovazliLDnmbvlvZXnlYzpnaIKICAgICAgbmV4dCh7CiAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAvLyDliqDovb3liqjmgIHoj5zljZXlkozot6/nlLEKICAgICAgYWRkRHluYW1pY01lbnVBbmRSb3V0ZXModXNlck5hbWUsIHRvLCBmcm9tKTsKICAgICAgbmV4dCgpOwogICAgfQogIH0KfSk7Ci8qKg0KKiDliqDovb3liqjmgIHoj5zljZXlkozot6/nlLENCiovCgpmdW5jdGlvbiBhZGREeW5hbWljTWVudUFuZFJvdXRlcyh1c2VyTmFtZSwgdG8sIGZyb20pIHsKICAvLyDlpITnkIZJRnJhbWXltYzlpZfpobXpnaIKICBoYW5kbGVJRnJhbWVVcmwodG8ucGF0aCk7CgogIGlmIChzdG9yZS5zdGF0ZS5hcHAubWVudVJvdXRlTG9hZGVkKSB7CiAgICBjb25zb2xlLmxvZygn5Yqo5oCB6I+c5Y2V5ZKM6Lev55Sx5bey57uP5a2Y5ZyoLicpOwogICAgcmV0dXJuOwogIH0KCiAgYXBpLm1lbnUuZmluZE5hdlRyZWUoewogICAgJ3VzZXJOYW1lJzogdXNlck5hbWUKICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIC8vIOa3u+WKoOWKqOaAgei3r+eUsQogICAgdmFyIGR5bmFtaWNSb3V0ZXMgPSBhZGREeW5hbWljUm91dGVzKHJlcy5kYXRhKTsgLy8g5aSE55CG6Z2Z5oCB57uE5Lu257uR5a6a6Lev55SxCgogICAgcm91dGVyLm9wdGlvbnMucm91dGVzWzBdLmNoaWxkcmVuID0gcm91dGVyLm9wdGlvbnMucm91dGVzWzBdLmNoaWxkcmVuLmNvbmNhdChkeW5hbWljUm91dGVzKTsKICAgIHJvdXRlci5hZGRSb3V0ZXMocm91dGVyLm9wdGlvbnMucm91dGVzKTsgLy8g5L+d5a2Y5Yqg6L2954q25oCBCgogICAgc3RvcmUuY29tbWl0KCdtZW51Um91dGVMb2FkZWQnLCB0cnVlKTsgLy8g5L+d5a2Y6I+c5Y2V5qCRCgogICAgc3RvcmUuY29tbWl0KCdzZXROYXZUcmVlJywgcmVzLmRhdGEpOwogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgYXBpLnVzZXIuZmluZFBlcm1pc3Npb25zKHsKICAgICAgJ25hbWUnOiB1c2VyTmFtZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIC8vIOS/neWtmOeUqOaIt+adg+mZkOagh+ivhumbhuWQiAogICAgICBzdG9yZS5jb21taXQoJ3NldFBlcm1zJywgcmVzLmRhdGEpOwogICAgfSk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykge30pOwp9Ci8qKg0KICog5aSE55CGSUZyYW1l5bWM5aWX6aG16Z2iDQogKi8KCgpmdW5jdGlvbiBoYW5kbGVJRnJhbWVVcmwocGF0aCkgewogIC8vIOW1jOWll+mhtemdou+8jOS/neWtmGlmcmFtZVVybOWIsHN0b3Jl77yM5L6bSUZyYW1l57uE5Lu26K+75Y+W5bGV56S6CiAgdmFyIHVybCA9IHBhdGg7CiAgdmFyIGxlbmd0aCA9IHN0b3JlLnN0YXRlLmlmcmFtZS5pZnJhbWVVcmxzLmxlbmd0aDsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgdmFyIGlmcmFtZSA9IHN0b3JlLnN0YXRlLmlmcmFtZS5pZnJhbWVVcmxzW2ldOwoKICAgIGlmIChwYXRoICE9IG51bGwgJiYgcGF0aC5lbmRzV2l0aChpZnJhbWUucGF0aCkpIHsKICAgICAgdXJsID0gaWZyYW1lLnVybDsKICAgICAgc3RvcmUuY29tbWl0KCdzZXRJRnJhbWVVcmwnLCB1cmwpOwogICAgICBicmVhazsKICAgIH0KICB9Cn0KLyoqDQoqIOa3u+WKoOWKqOaAgSjoj5zljZUp6Lev55SxDQoqIEBwYXJhbSB7Kn0gbWVudUxpc3Qg6I+c5Y2V5YiX6KGoDQoqIEBwYXJhbSB7Kn0gcm91dGVzIOmAkuW9kuWIm+W7uueahOWKqOaAgSjoj5zljZUp6Lev55SxDQoqLwoKCmZ1bmN0aW9uIGFkZER5bmFtaWNSb3V0ZXMoKSB7CiAgdmFyIG1lbnVMaXN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICB2YXIgcm91dGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICB2YXIgdGVtcCA9IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICBpZiAobWVudUxpc3RbaV0uY2hpbGRyZW4gJiYgbWVudUxpc3RbaV0uY2hpbGRyZW4ubGVuZ3RoID49IDEpIHsKICAgICAgdGVtcCA9IHRlbXAuY29uY2F0KG1lbnVMaXN0W2ldLmNoaWxkcmVuKTsKICAgIH0gZWxzZSBpZiAobWVudUxpc3RbaV0ubWVudVVybCAmJiAvXFMvLnRlc3QobWVudUxpc3RbaV0ubWVudVVybCkpIHsKICAgICAgbWVudUxpc3RbaV0ubWVudVVybCA9IG1lbnVMaXN0W2ldLm1lbnVVcmwucmVwbGFjZSgvXlwvLywgJycpOyAvLyDliJvlu7rot6/nlLHphY3nva4KCiAgICAgIHZhciByb3V0ZSA9IHsKICAgICAgICBwYXRoOiBtZW51TGlzdFtpXS5tZW51VXJsLAogICAgICAgIGNvbXBvbmVudDogbnVsbCwKICAgICAgICBuYW1lOiBtZW51TGlzdFtpXS5tZW51TmFtZSwKICAgICAgICBtZXRhOiB7CiAgICAgICAgICBpY29uOiBtZW51TGlzdFtpXS5pY29uLAogICAgICAgICAgaW5kZXg6IG1lbnVMaXN0W2ldLm1lbnVJZAogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIHBhdGggPSBnZXRJRnJhbWVQYXRoKG1lbnVMaXN0W2ldLm1lbnVVcmwpOwoKICAgICAgaWYgKHBhdGgpIHsKICAgICAgICAvLyDlpoLmnpzmmK/ltYzlpZfpobXpnaIsIOmAmui/h2lmcmFtZeWxleekugogICAgICAgIHJvdXRlWydwYXRoJ10gPSBwYXRoOwoKICAgICAgICByb3V0ZVsnY29tcG9uZW50J10gPSBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgcmV0dXJuIHJlcXVpcmUoWyJAL3ZpZXdzL0lGcmFtZS9JRnJhbWUiXSwgcmVzb2x2ZSk7CiAgICAgICAgfTsgLy8g5a2Y5YKo5bWM5aWX6aG16Z2i6Lev55Sx6Lev5b6E5ZKM6K6/6ZeuVVJMCgoKICAgICAgICB2YXIgdXJsID0gZ2V0SUZyYW1lVXJsKG1lbnVMaXN0W2ldLm1lbnVVcmwpOwogICAgICAgIHZhciBpRnJhbWVVcmwgPSB7CiAgICAgICAgICAncGF0aCc6IHBhdGgsCiAgICAgICAgICAndXJsJzogdXJsCiAgICAgICAgfTsKICAgICAgICBzdG9yZS5jb21taXQoJ2FkZElGcmFtZVVybCcsIGlGcmFtZVVybCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIOagueaNruiPnOWNlVVSTOWKqOaAgeWKoOi9vXZ1Zee7hOS7tu+8jOi/memHjOimgeaxgnZ1Zee7hOS7tumhu+aMieeFp3VybOi3r+W+hOWtmOWCqAogICAgICAgICAgICAvLyDlpoJ1cmw9InN5cy91c2VyIu+8jOWImee7hOS7tui3r+W+hOW6lOaYryJAL3ZpZXdzL3N5cy91c2VyLnZ1ZSIs5ZCm5YiZ57uE5Lu25Yqg6L295LiN5YiwCiAgICAgICAgICAgIHZhciBhcnJheSA9IG1lbnVMaXN0W2ldLm1lbnVVcmwuc3BsaXQoJy8nKTsKICAgICAgICAgICAgdmFyIHVybCA9ICcnOwoKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFycmF5Lmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgIHVybCArPSBhcnJheVtfaV0uc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBhcnJheVtfaV0uc3Vic3RyaW5nKDEpICsgJy8nOwogICAgICAgICAgICB9CgogICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIHVybC5sZW5ndGggLSAxKTsKCiAgICAgICAgICAgIHJvdXRlWydjb21wb25lbnQnXSA9IGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmUoWyJAL3ZpZXdzLyIuY29uY2F0KHVybCldLCByZXNvbHZlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pKCk7CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgfQoKICAgICAgcm91dGVzLnB1c2gocm91dGUpOwogICAgfQogIH0KCiAgaWYgKHRlbXAubGVuZ3RoID49IDEpIHsKICAgIGFkZER5bmFtaWNSb3V0ZXModGVtcCwgcm91dGVzKTsKICB9IGVsc2UgewogICAgY29uc29sZS5sb2coJ+WKqOaAgei3r+eUseWKoOi9vS4uLicpOwogICAgY29uc29sZS5sb2cocm91dGVzKTsKICAgIGNvbnNvbGUubG9nKCfliqjmgIHot6/nlLHliqDovb3lrozmiJAuJyk7CiAgfQoKICByZXR1cm4gcm91dGVzOwp9CgpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["D:/workspace/bot-h5/bot-ui/src/router/index.js"],"names":["Vue","Router","Login","NotFound","Home","Intro","api","store","getIFramePath","getIFrameUrl","originalPush","prototype","push","location","call","catch","err","use","router","routes","path","name","component","children","meta","icon","index","title","beforeEach","to","from","next","userName","sessionStorage","getItem","addDynamicMenuAndRoutes","handleIFrameUrl","state","app","menuRouteLoaded","console","log","menu","findNavTree","then","res","dynamicRoutes","addDynamicRoutes","data","options","concat","addRoutes","commit","user","findPermissions","url","length","iframe","iframeUrls","i","endsWith","menuList","temp","menuUrl","test","replace","route","menuName","menuId","resolve","require","iFrameUrl","array","split","substring","toUpperCase","e"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Login from '@/views/Login'\r\nimport NotFound from '@/views/404'\r\nimport Home from '@/views/Home'\r\nimport Intro from '@/views/Intro/Intro'\r\nimport api from '@/http/api'\r\nimport store from '@/store'\r\nimport { getIFramePath, getIFrameUrl } from '@/utils/iframe'\r\n\r\nconst originalPush = Router.prototype.push\r\nRouter.prototype.push = function push(location) {\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\n\r\nVue.use(Router)\r\n\r\nconst router = new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      name: '首页',\r\n      component: Home,\r\n      children: [\r\n        {\r\n          path: '',\r\n          name: '系统介绍',\r\n          component: Intro,\r\n          meta: {\r\n            icon: 'fa fa-home fa-lg',\r\n            index: 0\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      path: '/login',\r\n      name: '登录',\r\n      component: Login,\r\n      meta:{\r\n        title:'管理系统'\r\n      }\r\n    },\r\n    {\r\n      path: '/404',\r\n      name: 'notFound',\r\n      component: NotFound\r\n    }\r\n  ]\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  // 登录界面登录成功之后，会把用户信息保存在会话\r\n  // 存在时间为会话生命周期，页面关闭即失效。\r\n  let userName = sessionStorage.getItem('user')\r\n  if (to.path === '/login') {\r\n    // 如果是访问登录界面，如果用户会话信息存在，代表已登录过，跳转到主页\r\n    if(userName) {\r\n      next({ path: '/' })\r\n    } else {\r\n      next()\r\n    }\r\n  } else {\r\n    if (!userName) {\r\n      // 如果访问非登录界面，且户会话信息不存在，代表未登录，则跳转到登录界面\r\n      next({ path: '/login' })\r\n    } else {\r\n      // 加载动态菜单和路由\r\n      addDynamicMenuAndRoutes(userName, to, from)\r\n      next()\r\n    }\r\n  }\r\n})\r\n\r\n/**\r\n* 加载动态菜单和路由\r\n*/\r\nfunction addDynamicMenuAndRoutes(userName, to, from) {\r\n  // 处理IFrame嵌套页面\r\n  handleIFrameUrl(to.path)\r\n  if(store.state.app.menuRouteLoaded) {\r\n    console.log('动态菜单和路由已经存在.')\r\n    return\r\n  }\r\n  api.menu.findNavTree({'userName':userName})\r\n  .then(res => {\r\n    // 添加动态路由\r\n    let dynamicRoutes = addDynamicRoutes(res.data)\r\n    // 处理静态组件绑定路由\r\n    router.options.routes[0].children = router.options.routes[0].children.concat(dynamicRoutes)\r\n    router.addRoutes(router.options.routes)\r\n    // 保存加载状态\r\n    store.commit('menuRouteLoaded', true)\r\n    // 保存菜单树\r\n    store.commit('setNavTree', res.data)\r\n  }).then(res => {\r\n    api.user.findPermissions({'name':userName}).then(res => {\r\n      // 保存用户权限标识集合\r\n      store.commit('setPerms', res.data)\r\n    })\r\n  })\r\n  .catch(function(res) {\r\n  })\r\n}\r\n\r\n/**\r\n * 处理IFrame嵌套页面\r\n */\r\nfunction handleIFrameUrl(path) {\r\n  // 嵌套页面，保存iframeUrl到store，供IFrame组件读取展示\r\n  let url = path\r\n  let length = store.state.iframe.iframeUrls.length\r\n  for(let i=0; i<length; i++) {\r\n    let iframe = store.state.iframe.iframeUrls[i]\r\n    if(path != null && path.endsWith(iframe.path)) {\r\n      url = iframe.url\r\n      store.commit('setIFrameUrl', url)\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n* 添加动态(菜单)路由\r\n* @param {*} menuList 菜单列表\r\n* @param {*} routes 递归创建的动态(菜单)路由\r\n*/\r\nfunction addDynamicRoutes (menuList = [], routes = []) {\r\n var temp = []\r\n for (var i = 0; i < menuList.length; i++) {\r\n   if (menuList[i].children && menuList[i].children.length >= 1) {\r\n     temp = temp.concat(menuList[i].children)\r\n   } else if (menuList[i].menuUrl && /\\S/.test(menuList[i].menuUrl)) {\r\n      menuList[i].menuUrl = menuList[i].menuUrl.replace(/^\\//, '')\r\n      // 创建路由配置\r\n      var route = {\r\n        path: menuList[i].menuUrl,\r\n        component: null,\r\n        name: menuList[i].menuName,\r\n        meta: {\r\n          icon: menuList[i].icon,\r\n          index: menuList[i].menuId\r\n        }\r\n      }\r\n      let path = getIFramePath(menuList[i].menuUrl)\r\n      if (path) {\r\n        // 如果是嵌套页面, 通过iframe展示\r\n        route['path'] = path\r\n        route['component'] = resolve => require([`@/views/IFrame/IFrame`], resolve)\r\n        // 存储嵌套页面路由路径和访问URL\r\n        let url = getIFrameUrl(menuList[i].menuUrl)\r\n        let iFrameUrl = {'path':path, 'url':url}\r\n        store.commit('addIFrameUrl', iFrameUrl)\r\n      } else {\r\n       try {\r\n         // 根据菜单URL动态加载vue组件，这里要求vue组件须按照url路径存储\r\n         // 如url=\"sys/user\"，则组件路径应是\"@/views/sys/user.vue\",否则组件加载不到\r\n         let array = menuList[i].menuUrl.split('/')\r\n         let url = ''\r\n         for(let i=0; i<array.length; i++) {\r\n            url += array[i].substring(0,1).toUpperCase() + array[i].substring(1) + '/'\r\n         }\r\n         url = url.substring(0, url.length - 1)\r\n         route['component'] = resolve => require([`@/views/${url}`], resolve)\r\n       } catch (e) {}\r\n     }\r\n     routes.push(route)\r\n   }\r\n }\r\n if (temp.length >= 1) {\r\n   addDynamicRoutes(temp, routes)\r\n } else {\r\n   console.log('动态路由加载...')\r\n   console.log(routes)\r\n   console.log('动态路由加载完成.')\r\n }\r\n return routes\r\n}\r\n\r\nexport default router\r\n"]}]}