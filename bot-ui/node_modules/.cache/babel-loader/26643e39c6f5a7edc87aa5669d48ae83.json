{"remainingRequest":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\soft\\workspace\\bot-manager\\bot-ui\\src\\views\\Core\\TableTreeColumn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\src\\views\\Core\\TableTreeColumn.vue","mtime":1702475008430},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBpc0FycmF5IGZyb20gJ2xvZGFzaC9pc0FycmF5JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd0YWJsZS10cmVlLWNvbHVtbicsCiAgcHJvcHM6IHsKICAgIHByb3A6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgdHJlZUtleTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdpZCcKICAgIH0sCiAgICBwYXJlbnRLZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAncGFyZW50SWQnCiAgICB9LAogICAgbGV2ZWxLZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnbGV2ZWwnCiAgICB9LAogICAgY2hpbGRLZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY2hpbGRyZW4nCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGlsZFN0eWxlczogZnVuY3Rpb24gY2hpbGRTdHlsZXMocm93KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ3BhZGRpbmctbGVmdCc6IHJvd1t0aGlzLmxldmVsS2V5XSAqIDI1ICsgJ3B4JwogICAgICB9OwogICAgfSwKICAgIGljb25DbGFzc2VzOiBmdW5jdGlvbiBpY29uQ2xhc3Nlcyhyb3cpIHsKICAgICAgcmV0dXJuIFshcm93Ll9leHBhbmRlZCA/ICdlbC1pY29uLWNhcmV0LXJpZ2h0JyA6ICdlbC1pY29uLWNhcmV0LWJvdHRvbSddOwogICAgfSwKICAgIGljb25TdHlsZXM6IGZ1bmN0aW9uIGljb25TdHlsZXMocm93KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ3Zpc2liaWxpdHknOiB0aGlzLmhhc0NoaWxkKHJvdykgPyAndmlzaWJsZScgOiAnaGlkZGVuJwogICAgICB9OwogICAgfSwKICAgIGhhc0NoaWxkOiBmdW5jdGlvbiBoYXNDaGlsZChyb3cpIHsKICAgICAgcmV0dXJuIGlzQXJyYXkocm93W3RoaXMuY2hpbGRLZXldKSAmJiByb3dbdGhpcy5jaGlsZEtleV0ubGVuZ3RoID49IDEgfHwgZmFsc2U7CiAgICB9LAogICAgLy8g5YiH5o2i5aSE55CGCiAgICB0b2dnbGVIYW5kbGU6IGZ1bmN0aW9uIHRvZ2dsZUhhbmRsZShpbmRleCwgcm93KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5oYXNDaGlsZChyb3cpKSB7CiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLiRwYXJlbnQuc3RvcmUuc3RhdGVzLmRhdGEuc2xpY2UoMCk7CiAgICAgICAgZGF0YVtpbmRleF0uX2V4cGFuZGVkID0gIWRhdGFbaW5kZXhdLl9leHBhbmRlZDsKCiAgICAgICAgaWYgKGRhdGFbaW5kZXhdLl9leHBhbmRlZCkgewogICAgICAgICAgZGF0YSA9IGRhdGEuc3BsaWNlKDAsIGluZGV4ICsgMSkuY29uY2F0KHJvd1t0aGlzLmNoaWxkS2V5XSkuY29uY2F0KGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhID0gdGhpcy5yZW1vdmVDaGlsZE5vZGUoZGF0YSwgcm93W3RoaXMudHJlZUtleV0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kcGFyZW50LnN0b3JlLmNvbW1pdCgnc2V0RGF0YScsIGRhdGEpOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRwYXJlbnQuZG9MYXlvdXQoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOenu+mZpOWtkOiKgueCuQogICAgcmVtb3ZlQ2hpbGROb2RlOiBmdW5jdGlvbiByZW1vdmVDaGlsZE5vZGUoZGF0YSwgcGFyZW50SWQpIHsKICAgICAgdmFyIHBhcmVudElkcyA9IGlzQXJyYXkocGFyZW50SWQpID8gcGFyZW50SWQgOiBbcGFyZW50SWRdOwoKICAgICAgaWYgKHBhcmVudElkLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgIH0KCiAgICAgIHZhciBpZHMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChwYXJlbnRJZHMuaW5kZXhPZihkYXRhW2ldW3RoaXMucGFyZW50S2V5XSkgIT09IC0xICYmIHBhcmVudElkcy5pbmRleE9mKGRhdGFbaV1bdGhpcy50cmVlS2V5XSkgPT09IC0xKSB7CiAgICAgICAgICBpZHMucHVzaChkYXRhLnNwbGljZShpLCAxKVswXVt0aGlzLnRyZWVLZXldKTsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbW92ZUNoaWxkTm9kZShkYXRhLCBpZHMpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["TableTreeColumn.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-table-column :prop=\"prop\" v-bind=\"$attrs\">\r\n    <template slot-scope=\"scope\">\r\n      <span @click.prevent=\"toggleHandle(scope.$index, scope.row)\" :style=\"childStyles(scope.row)\">\r\n        <i :class=\"iconClasses(scope.row)\" :style=\"iconStyles(scope.row)\"></i>\r\n        {{ scope.row[prop] }}\r\n      </span>\r\n    </template>\r\n  </el-table-column>\r\n</template>\r\n\r\n<script>\r\n  import isArray from 'lodash/isArray'\r\n  export default {\r\n    name: 'table-tree-column',\r\n    props: {\r\n      prop: {\r\n        type: String\r\n      },\r\n      treeKey: {\r\n        type: String,\r\n        default: 'id'\r\n      },\r\n      parentKey: {\r\n        type: String,\r\n        default: 'parentId'\r\n      },\r\n      levelKey: {\r\n        type: String,\r\n        default: 'level'\r\n      },\r\n      childKey: {\r\n        type: String,\r\n        default: 'children'\r\n      }\r\n    },\r\n    methods: {\r\n      childStyles (row) {\r\n        return { 'padding-left': (row[this.levelKey] * 25) + 'px' }\r\n      },\r\n      iconClasses (row) {\r\n        return [ !row._expanded ? 'el-icon-caret-right' : 'el-icon-caret-bottom' ]\r\n      },\r\n      iconStyles (row) {\r\n        return { 'visibility': this.hasChild(row) ? 'visible' : 'hidden' }\r\n      },\r\n      hasChild (row) {\r\n        return (isArray(row[this.childKey]) && row[this.childKey].length >= 1) || false\r\n      },\r\n      // 切换处理\r\n      toggleHandle (index, row) {\r\n        if (this.hasChild(row)) {\r\n          var data = this.$parent.store.states.data.slice(0)\r\n          data[index]._expanded = !data[index]._expanded\r\n          if (data[index]._expanded) {\r\n            data = data.splice(0, index + 1).concat(row[this.childKey]).concat(data)\r\n          } else {\r\n            data = this.removeChildNode(data, row[this.treeKey])\r\n          }\r\n          this.$parent.store.commit('setData', data)\r\n          this.$nextTick(() => {\r\n            this.$parent.doLayout()\r\n          })\r\n        }\r\n      },\r\n      // 移除子节点\r\n      removeChildNode (data, parentId) {\r\n        var parentIds = isArray(parentId) ? parentId : [parentId]\r\n        if (parentId.length <= 0) {\r\n          return data\r\n        }\r\n        var ids = []\r\n        for (var i = 0; i < data.length; i++) {\r\n          if (parentIds.indexOf(data[i][this.parentKey]) !== -1 && parentIds.indexOf(data[i][this.treeKey]) === -1) {\r\n            ids.push(data.splice(i, 1)[0][this.treeKey])\r\n            i--\r\n          }\r\n        }\r\n        return this.removeChildNode(data, ids)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n"],"sourceRoot":"src/views/Core"}]}