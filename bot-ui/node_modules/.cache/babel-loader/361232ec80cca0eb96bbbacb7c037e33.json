{"remainingRequest":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\bot-manager\\bot-ui\\src\\http\\axios.js","dependencies":[{"path":"D:\\workspace\\bot-manager\\bot-ui\\src\\http\\axios.js","mtime":1702475008361},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7CmltcG9ydCBDb29raWVzIGZyb20gImpzLWNvb2tpZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICRheGlvcyhvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgICAgIGJhc2VVUkw6IGNvbmZpZy5iYXNlVXJsLAogICAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycywKICAgICAgdGltZW91dDogY29uZmlnLnRpbWVvdXQsCiAgICAgIHdpdGhDcmVkZW50aWFsczogY29uZmlnLndpdGhDcmVkZW50aWFscwogICAgfSk7IC8vIHJlcXVlc3Qg6K+35rGC5oum5oiq5ZmoCgogICAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgdmFyIHRva2VuID0gQ29va2llcy5nZXQoJ3Rva2VuJyk7IC8vbGV0IHRva2VuID0gc3RvcmUuc3RhdGUudXNlci50b2tlbgogICAgICAvLyDlj5HpgIHor7fmsYLml7bmkLrluKZ0b2tlbgoKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgY29uZmlnLmhlYWRlcnMudG9rZW4gPSB0b2tlbjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDph43lrprlkJHliLDnmbvlvZXpobXpnaIKICAgICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25maWc7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgLy8g6K+35rGC5Y+R55Sf6ZSZ6K+v5pe2CiAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0OicsIGVycm9yKTsgLy8g5Yik5pat6K+35rGC6LaF5pe2CgogICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VDT05OQUJPUlRFRCcgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKCd0aW1lb3V0JykgIT09IC0xKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3RpbWVvdXTor7fmsYLotoXml7YnKTsKICAgICAgfSAvLyDpnIDopoHph43lrprlkJHliLDplJnor6/pobXpnaIKCgogICAgICB2YXIgZXJyb3JJbmZvID0gZXJyb3IucmVzcG9uc2U7CiAgICAgIGNvbnNvbGUubG9nKCJlcnJvckluZm8tLS0tLS0tLS0tLS0iICsgZXJyb3JJbmZvKTsKCiAgICAgIGlmIChlcnJvckluZm8pIHsKICAgICAgICBlcnJvciA9IGVycm9ySW5mby5kYXRhOyAvLyDpobXpnaLpgqPovrljYXRjaOeahOaXtuWAmeWwseiDveaLv+WIsOivpue7hueahOmUmeivr+S/oeaBryznnIvmnIDkuIvovrnnmoRQcm9taXNlLnJlamVjdAoKICAgICAgICB2YXIgZXJyb3JTdGF0dXMgPSBlcnJvckluZm8uc3RhdHVzOyAvLyA0MDQgNDAzIDUwMCAuLi4KCiAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9lcnJvci8iLmNvbmNhdChlcnJvclN0YXR1cykKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsgLy8g5Zyo6LCD55So55qE6YKj6L655Y+v5Lul5ou/5YiwKGNhdGNoKeS9oOaDs+i/lOWbnueahOmUmeivr+S/oeaBrwogICAgfSk7IC8vIHJlc3BvbnNlIOWTjeW6lOaLpuaIquWZqAoKICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICBpZiAoZXJyICYmIGVyci5yZXNwb25zZSkgewogICAgICAgIHN3aXRjaCAoZXJyLnJlc3BvbnNlLnN0YXR1cykgewogICAgICAgICAgY2FzZSA0MDA6CiAgICAgICAgICAgIGVyci5tZXNzYWdlID0gJ+ivt+axgumUmeivryc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNDAxOgogICAgICAgICAgICBlcnIubWVzc2FnZSA9ICfmnKrmjojmnYPvvIzor7fnmbvlvZUnOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA0MDM6CiAgICAgICAgICAgIGVyci5tZXNzYWdlID0gJ+aLkue7neiuv+mXric7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgICAgICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDQwNDoKICAgICAgICAgICAgZXJyLm1lc3NhZ2UgPSAiXHU4QkY3XHU2QzQyXHU1NzMwXHU1NzQwXHU1MUZBXHU5NTE5OiAiLmNvbmNhdChlcnIucmVzcG9uc2UuY29uZmlnLnVybCk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNDA4OgogICAgICAgICAgICBlcnIubWVzc2FnZSA9ICfor7fmsYLotoXml7YnOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDUwMDoKICAgICAgICAgICAgZXJyLm1lc3NhZ2UgPSAn5pyN5Yqh5Zmo5YaF6YOo6ZSZ6K+vJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA1MDE6CiAgICAgICAgICAgIGVyci5tZXNzYWdlID0gJ+acjeWKoeacquWunueOsCc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNTAyOgogICAgICAgICAgICBlcnIubWVzc2FnZSA9ICfnvZHlhbPplJnor68nOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDUwMzoKICAgICAgICAgICAgZXJyLm1lc3NhZ2UgPSAn5pyN5Yqh5LiN5Y+v55SoJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA1MDQ6CiAgICAgICAgICAgIGVyci5tZXNzYWdlID0gJ+e9keWFs+i2heaXtic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNTA1OgogICAgICAgICAgICBlcnIubWVzc2FnZSA9ICdIVFRQ54mI5pys5LiN5Y+X5pSv5oyBJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7IC8vIOi/lOWbnuaOpeWPo+i/lOWbnueahOmUmeivr+S/oeaBrwogICAgfSk7IC8vIOivt+axguWkhOeQhgoKICAgIGluc3RhbmNlKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICByZXNvbHZlKHJlcyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZWplY3QoZXJyb3IpOwogICAgfSk7CiAgfSk7Cn0="},{"version":3,"sources":["D:/workspace/bot-manager/bot-ui/src/http/axios.js"],"names":["axios","config","Cookies","router","store","$axios","options","Promise","resolve","reject","instance","create","baseURL","baseUrl","headers","timeout","withCredentials","interceptors","request","use","token","get","push","error","console","log","code","message","indexOf","errorInfo","response","data","errorStatus","status","path","err","sessionStorage","removeItem","url","then","res","catch"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport config from './config';\r\nimport Cookies from \"js-cookie\";\r\nimport router from '@/router'\r\nimport store from '@/store'\r\n\r\nexport default function $axios(options) {\r\n  return new Promise((resolve, reject) => {\r\n    const instance = axios.create({\r\n      baseURL: config.baseUrl,\r\n      headers: config.headers,\r\n      timeout: config.timeout,\r\n      withCredentials: config.withCredentials\r\n    })\r\n    // request 请求拦截器\r\n    instance.interceptors.request.use(\r\n      config => {\r\n         let token = Cookies.get('token')\r\n        //let token = store.state.user.token\r\n        // 发送请求时携带token\r\n        if (token) {\r\n          config.headers.token = token\r\n        } else {\r\n          // 重定向到登录页面\r\n          router.push('/login')\r\n        }\r\n        return config\r\n      },\r\n      error => {\r\n        // 请求发生错误时\r\n        console.log('request:', error)\r\n        // 判断请求超时\r\n        if (error.code === 'ECONNABORTED' && error.message.indexOf('timeout') !== -1) {\r\n          console.log('timeout请求超时')\r\n        }\r\n        // 需要重定向到错误页面\r\n        const errorInfo = error.response\r\n        console.log(\"errorInfo------------\"+errorInfo)\r\n        if (errorInfo) {\r\n          error = errorInfo.data  // 页面那边catch的时候就能拿到详细的错误信息,看最下边的Promise.reject\r\n          const errorStatus = errorInfo.status; // 404 403 500 ...\r\n          router.push({\r\n            path: `/error/${errorStatus}`\r\n          })\r\n        }\r\n        return Promise.reject(error) // 在调用的那边可以拿到(catch)你想返回的错误信息\r\n      }\r\n    )\r\n\r\n    // response 响应拦截器\r\n    instance.interceptors.response.use(\r\n      response => {\r\n        return response.data\r\n      },\r\n      err => {\r\n        if (err && err.response) {\r\n          switch (err.response.status) {\r\n            case 400:\r\n              err.message = '请求错误'\r\n              break\r\n            case 401:\r\n              err.message = '未授权，请登录'\r\n                sessionStorage.removeItem('user')\r\n               router.push('/login')\r\n              break\r\n            case 403:\r\n              err.message = '拒绝访问'\r\n              sessionStorage.removeItem('user')\r\n              router.push('/login')\r\n              break\r\n            case 404:\r\n              err.message = `请求地址出错: ${err.response.config.url}`\r\n              break\r\n            case 408:\r\n              err.message = '请求超时'\r\n              break\r\n            case 500:\r\n              err.message = '服务器内部错误'\r\n              break\r\n            case 501:\r\n              err.message = '服务未实现'\r\n              break\r\n            case 502:\r\n              err.message = '网关错误'\r\n              break\r\n            case 503:\r\n              err.message = '服务不可用'\r\n              break\r\n            case 504:\r\n              err.message = '网关超时'\r\n              break\r\n            case 505:\r\n              err.message = 'HTTP版本不受支持'\r\n              break\r\n            default:\r\n          }\r\n        }\r\n        console.error(err)\r\n        return Promise.reject(err) // 返回接口返回的错误信息\r\n      }\r\n    )\r\n    // 请求处理\r\n    instance(options).then(res => {\r\n      resolve(res)\r\n      return false\r\n    }).catch(error => {\r\n      reject(error)\r\n    })\r\n  })\r\n}\r\n"]}]}