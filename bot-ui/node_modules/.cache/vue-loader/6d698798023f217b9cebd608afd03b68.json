{"remainingRequest":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\bot-h5\\bot-ui\\src\\views\\Core\\PersonalPanel.vue?vue&type=style&index=0&id=ccd87a64&scoped=true&lang=css&","dependencies":[{"path":"D:\\workspace\\bot-h5\\bot-ui\\src\\views\\Core\\PersonalPanel.vue","mtime":1713593527974},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucGVyc29uYWwtcGFuZWwgew0KICBmb250LXNpemU6IDE0cHg7DQogIHdpZHRoOiAyODBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBib3JkZXItY29sb3I6IHJnYmEoMTgwLCAxOTAsIDE5MCwgMC4yKTsNCiAgYm9yZGVyLXdpZHRoOiAxcHg7DQogIGJvcmRlci1zdHlsZTogc29saWQ7DQogIGJhY2tncm91bmQ6IHJnYmEoMTgyLCAxNzIsIDE3MiwgMC4xKTsNCiAgbWFyZ2luOiAtMTRweDsNCn0NCi5wZXJzb25hbC1kZXNjIHsNCiAgcGFkZGluZzogMTVweDsNCiAgY29sb3I6ICNmZmY7DQp9DQouYXZhdGFyIHsNCiAgd2lkdGg6IDgwcHg7DQogIGhlaWdodDogODBweDsNCiAgYm9yZGVyLXJhZGl1czogOTBweDsNCn0NCi5uYW1lLXJvbGUgew0KICBmb250LXNpemU6IDE2cHg7DQogIHBhZGRpbmc6IDVweDsNCn0NCi5wZXJzb25hbC1yZWxhdGlvbiB7DQogIGZvbnQtc2l6ZTogMTZweDsNCiAgcGFkZGluZzogMTJweDsNCiAgbWFyZ2luLXJpZ2h0OiAxcHg7DQogIGJhY2tncm91bmQ6IHJnYmEoMjAwLCAyMDksIDIwNCwgMC4zKTsNCn0NCi5yZWxhdGlvbi1pdGVtIHsNCiAgcGFkZGluZzogMTJweDsNCn0NCi5yZWxhdGlvbi1pdGVtOmhvdmVyIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBjb2xvcjogcmdiKDE5LCAxMzgsIDE1Nik7DQp9DQoubWFpbi1vcGVyYXRpb24gew0KICBwYWRkaW5nOiA4cHg7DQogIG1hcmdpbi1yaWdodDogMXB4Ow0KICAvKiBiYWNrZ3JvdW5kOiByZ2JhKDE3NSwgMTgyLCAxNzksIDAuMyk7ICovDQogIGJvcmRlci1jb2xvcjogcmdiYSgyMDEsIDIwNiwgMjA2LCAwLjIpOw0KICBib3JkZXItdG9wLXdpZHRoOiAxcHg7DQogIGJvcmRlci10b3Atc3R5bGU6IHNvbGlkOw0KfQ0KLm1haW4tb3BlcmF0aW9uLWl0ZW0gew0KICBtYXJnaW46IDE1cHg7DQp9DQoub3RoZXItb3BlcmF0aW9uIHsNCiAgcGFkZGluZzogMTVweDsNCiAgbWFyZ2luLXJpZ2h0OiAxcHg7DQogIHRleHQtYWxpZ246IGxlZnQ7DQogIGJvcmRlci1jb2xvcjogcmdiYSgxODAsIDE5MCwgMTkwLCAwLjIpOw0KICBib3JkZXItdG9wLXdpZHRoOiAxcHg7DQogIGJvcmRlci10b3Atc3R5bGU6IHNvbGlkOw0KfQ0KLm90aGVyLW9wZXJhdGlvbi1pdGVtIHsNCiAgcGFkZGluZzogMTJweDsNCn0NCi5vdGhlci1vcGVyYXRpb24taXRlbTpob3ZlciB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgYmFja2dyb3VuZDogIzllOTQ5NDFlOw0KICBjb2xvcjogcmdiKDE5LCAxMzgsIDE1Nik7DQp9DQoucGVyc29uYWwtZm9vdGVyIHsNCiAgbWFyZ2luLXJpZ2h0OiAxcHg7DQogIGZvbnQtc2l6ZTogMTRweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBwYWRkaW5nLXRvcDogMTBweDsNCiAgcGFkZGluZy1ib3R0b206IDEwcHg7DQogIGJvcmRlci1jb2xvcjogcmdiYSgxODAsIDE5MCwgMTkwLCAwLjIpOw0KICBib3JkZXItdG9wLXdpZHRoOiAxcHg7DQogIGJvcmRlci10b3Atc3R5bGU6IHNvbGlkOw0KfQ0KLnBlcnNvbmFsLWZvb3Rlcjpob3ZlciB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgY29sb3I6IHJnYigxOSwgMTM4LCAxNTYpOw0KICBiYWNrZ3JvdW5kOiAjYjFhNmE2MWU7DQp9DQo="},{"version":3,"sources":["PersonalPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PersonalPanel.vue","sourceRoot":"src/views/Core","sourcesContent":["<template>\r\n  <div class=\"personal-panel\">\r\n    <div class=\"personal-desc\" :style=\"{'background':this.$store.state.app.themeColor}\">\r\n        <div class=\"name-role\">\r\n          <span class=\"sender\" v-if=\"user.type > 0\">{{ user.loginname }} - {{ user.clevel }}级{{ rolename }}</span>\r\n          <span class=\"sender\" v-else>{{ user.loginname }} - {{ rolename }}</span>\r\n        </div>\r\n        <div class=\"registe-info\">\r\n          <span class=\"registe-info\">\r\n\r\n          </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"other-operation\">\r\n        <div class=\"other-operation-item\" @click=\"clearCache\">\r\n          <li class=\"fa fa-eraser\"></li>\r\n          清除缓存\r\n        </div>\r\n        <div class=\"other-operation-item\" @click=\"openupdatePasswordDialog\">\r\n          <li class=\"fa fa-key\"></li>\r\n          修改密码\r\n        </div>\r\n        <div class=\"other-operation-item\" @click=\"logout\">\r\n          <li class=\"fa fa-sign-out\"></li>\r\n          退出登陆\r\n        </div>\r\n\r\n    </div>\r\n    <!--修改密码界面-->\r\n    <el-dialog title=\"修改密码\" width=\"40%\" :visible.sync=\"updatePwdDialogVisible\" :close-on-click-modal=\"false\" :modal=\"false\">\r\n      <el-form :model=\"updatePwdDataForm\" label-width=\"100px\" :rules=\"updatePwdDataFormRules\" ref=\"updatePwdDataForm\" :size=\"size\">\r\n        <el-form-item label=\"原密码\" prop=\"password\">\r\n          <el-input v-model=\"updatePwdDataForm.password\" type=\"password\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n          <el-input v-model=\"updatePwdDataForm.newPassword\" type=\"password\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认新密码\" prop=\"comfirmPassword\">\r\n          <el-input v-model=\"updatePwdDataForm.comfirmPassword\" type=\"password\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button :size=\"size\" @click.native=\"updatePwdDialogVisible = false\">{{$t('action.cancel')}}</el-button>\r\n        <el-button :size=\"size\" type=\"primary\" @click.native=\"updatePassword\" :loading=\"updatePwdLoading\">{{$t('action.comfirm')}}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { format } from \"@/utils/datetime\"\r\nimport user from \"@/store/modules/user\";\r\nexport default {\r\n  name: 'PersonalPanel',\r\n  components:{\r\n\r\n  },\r\n  props: {\r\n    user: {\r\n      type: Object,\r\n      default(){\r\n          return {\r\n          nickName: \"admin\",\r\n          avatar: \"@/assets/user.png\",\r\n          role: \"超级管理员\",\r\n          registeInfo: \"注册时间：2018-12-25 \"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      onlineUser: 0,\r\n      accessTimes: 0,\r\n      size: 'small',\r\n      updatePwdDialogVisible: false,\r\n      updatePwdLoading: false,\r\n      rolename: '',\r\n      updatePwdDataForm: {\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tnewPassword: '',\r\n\t\t\t\tcomfirmPassword: ''\r\n\t\t\t},\r\n      updatePwdDataFormRules: {\r\n\t\t\t\tpassword: [\r\n\t\t\t\t\t{ required: true, message: '请输入原密码', trigger: 'blur' }\r\n        ],\r\n        newPassword: [\r\n\t\t\t\t\t{ required: true, message: '请输入新密码', trigger: 'blur' }\r\n        ],\r\n        comfirmPassword: [\r\n\t\t\t\t\t{ required: true, message: '请确认密码', trigger: 'blur' }\r\n\t\t\t\t]\r\n\t\t\t},\r\n    }\r\n  },\r\n  methods: {\r\n    // 打开修改密码对话框\r\n\t\topenupdatePasswordDialog: function () {\r\n\t\t\tthis.updatePwdDialogVisible = true\r\n\t\t},\r\n    // 修改密码\r\n\t\tupdatePassword: function () {\r\n\t\t\tthis.$refs.updatePwdDataForm.validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n          if(this.updatePwdDataForm.newPassword != this.updatePwdDataForm.comfirmPassword) {\r\n            this.$message({message: '新密码与确认新密码不一致', type: 'error'})\r\n            return\r\n          }\r\n\t\t\t\tthis.updatePwdLoading = true\r\n\t\t\t\tlet params = {password:this.updatePwdDataForm.password, newPassword:this.updatePwdDataForm.newPassword}\r\n\t\t\t\tthis.$api.user.updatePassword(params).then((res) => {\r\n\t\t\t\t\tthis.updatePwdLoading = false\r\n\t\t\t\t\tif(res.code == 200) {\r\n\t\t\t\t\t\tthis.$message({ message: '操作成功', type: 'success' })\r\n\t\t\t\t    this.$refs['updatePwdDataForm'].resetFields()\r\n\t\t\t\t    this.logoutApi()\r\n\t\t\t\t   this.updatePwdDialogVisible = false\r\n\t\t\t\t\t} else {\r\n\t\t\t\t    this.$message({message: '操作失败, ' + res.msg, type: 'error'})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n    // 退出登录\r\n    logout() {\r\n      this.$confirm(\"确认退出吗?\", \"提示\", {\r\n        type: \"warning\"\r\n      })\r\n      .then(() => {\r\n        this.logoutApi()\r\n      })\r\n      .catch(() => {})\r\n    },\r\n    // 清除缓存并退出登录\r\n    clearCache() {\r\n      this.$confirm(\"确认清除缓存并退出登录吗?\", \"提示\", {\r\n        type: \"warning\"\r\n      })\r\n      .then(() => {\r\n        this.deleteCookie('token')// 清空Cookie里的token\r\n        this.logoutApi()\r\n      })\r\n      .catch(() => {})\r\n    },\r\n    logoutApi() {\r\n      sessionStorage.removeItem(\"user\")\r\n        this.$api.login.logout().then((res) => {\r\n          this.$router.push(\"/login\")\r\n          }).catch(function(res) {\r\n        })\r\n    },\r\n    // 清除Cookie\r\n    deleteCookie(name){\r\n         var myDate = new Date()\r\n         myDate.setTime(-1000) // 设置过期时间\r\n         document.cookie = name+\"=''; expires=\"+myDate.toGMTString();\r\n    },\r\n    // 获取在线用户数\r\n\t\tcountOnlineUser() {\r\n\r\n\t\t},\r\n    // 获取访问次数\r\n\t\tcountAccessTimes() {\r\n\r\n\t\t},\r\n    openOnlinePage() {\r\n      // 通过菜单URL跳转至指定路由\r\n      this.$router.push('/sys/online')\r\n    },\r\n\t\t// 时间格式化\r\n    dateFormat(date){\r\n      return format(date)\r\n    },\r\n    showRoleName(){\r\n        if(this.user.type == 0){\r\n          this.rolename = this.user.roleName\r\n        }else if(this.user.type==1){\r\n          this.rolename = \"代理\"\r\n        }else if(this.user.type==2){\r\n          this.rolename = \"客户\"\r\n        }\r\n    }\r\n\r\n  },\r\n  beforeUpdate() {\r\n    this.showRoleName()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.personal-panel {\r\n  font-size: 14px;\r\n  width: 280px;\r\n  text-align: center;\r\n  border-color: rgba(180, 190, 190, 0.2);\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  background: rgba(182, 172, 172, 0.1);\r\n  margin: -14px;\r\n}\r\n.personal-desc {\r\n  padding: 15px;\r\n  color: #fff;\r\n}\r\n.avatar {\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 90px;\r\n}\r\n.name-role {\r\n  font-size: 16px;\r\n  padding: 5px;\r\n}\r\n.personal-relation {\r\n  font-size: 16px;\r\n  padding: 12px;\r\n  margin-right: 1px;\r\n  background: rgba(200, 209, 204, 0.3);\r\n}\r\n.relation-item {\r\n  padding: 12px;\r\n}\r\n.relation-item:hover {\r\n  cursor: pointer;\r\n  color: rgb(19, 138, 156);\r\n}\r\n.main-operation {\r\n  padding: 8px;\r\n  margin-right: 1px;\r\n  /* background: rgba(175, 182, 179, 0.3); */\r\n  border-color: rgba(201, 206, 206, 0.2);\r\n  border-top-width: 1px;\r\n  border-top-style: solid;\r\n}\r\n.main-operation-item {\r\n  margin: 15px;\r\n}\r\n.other-operation {\r\n  padding: 15px;\r\n  margin-right: 1px;\r\n  text-align: left;\r\n  border-color: rgba(180, 190, 190, 0.2);\r\n  border-top-width: 1px;\r\n  border-top-style: solid;\r\n}\r\n.other-operation-item {\r\n  padding: 12px;\r\n}\r\n.other-operation-item:hover {\r\n  cursor: pointer;\r\n  background: #9e94941e;\r\n  color: rgb(19, 138, 156);\r\n}\r\n.personal-footer {\r\n  margin-right: 1px;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  border-color: rgba(180, 190, 190, 0.2);\r\n  border-top-width: 1px;\r\n  border-top-style: solid;\r\n}\r\n.personal-footer:hover {\r\n  cursor: pointer;\r\n  color: rgb(19, 138, 156);\r\n  background: #b1a6a61e;\r\n}\r\n</style>\r\n"]}]}