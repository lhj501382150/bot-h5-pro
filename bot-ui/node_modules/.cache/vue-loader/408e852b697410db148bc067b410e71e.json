{"remainingRequest":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\bot-h5\\bot-ui\\src\\views\\Trade\\Compents\\UploadFileMulty.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\bot-h5\\bot-ui\\src\\views\\Trade\\Compents\\UploadFileMulty.vue","mtime":1702475008485},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBmaWxlVXJsIH0gZnJvbSAnQC91dGlscy9nbG9iYWwnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdVcGxvYWRGaWxlTXV0bHknLA0KICBwcm9wczp7DQogICAgbW9kZWw6U3RyaW5nLA0KICAgIGltZ1BhdGg6U3RyaW5nLA0KICAgIGluZm86U3RyaW5nDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVwbG9hZFVybDogZmlsZVVybCArICcvdXBsb2FkRmlsZScsDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpc2FibGVkOiBmYWxzZSwNCiAgICAgIGltZ1VybDonJywNCiAgICAgIGZpbGVzOltdLA0KICAgICAgZmlsZUxpc3Q6W10sDQogICAgICBkYXRhOnt9DQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXRGaWxlVXJsKGZpbGVMaXN0KXsNCiAgICAgIHRoaXMuZmlsZXMgPSBmaWxlTGlzdA0KICAgIH0sDQogICAgaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLmluaXRGaWxlVXJsKGZpbGVMaXN0KQ0KICAgIH0sDQogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmltZ1VybCA9IGZpbGUudXJsDQogICAgfSwNCiAgICBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSl7DQogICAgICBjb25zdCB0eXBlID0gZmlsZS50eXBlDQogICAgICBjb25zdCBpc0pQRyA9ICdpbWFnZS9qcGVnLGltYWdlL3BuZyxpbWFnZS9ibXAnLmluZGV4T2YodHlwZSkgPiAtMTsNCiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMTA7DQoNCiAgICAgIGlmICghaXNKUEcpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJyk7DQogICAgICB9DQogICAgICBpZiAoIWlzTHQyTSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlm77niYflpKflsI/kuI3og73otoXov4cgMTBNQiEnKTsNCiAgICAgIH0NCiAgICAgIHRoaXMuZGF0YS50eXBlID0gdGhpcy5tb2RlbA0KICAgICAgdGhpcy5kYXRhLnBhdGggPSBmaWxlLnVybA0KICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsNCiAgICB9LA0KICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3MocmVzLCBmaWxlLGZpbGVMaXN0KSB7DQogICAgICBpZihyZXMuZXJyb3I9PT0wKXsNCiAgICAgICAgZmlsZS51cmwgPSBmaWxlVXJsICsgJy9kb3dubG9hZEZpbGU/cGF0aD0nICtyZXMudXJsDQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5paH5Lu25aSx6LSlOiIrIHJlcy5tZXNzYWdlKQ0KICAgICAgfQ0KICAgICAgdGhpcy5pbml0RmlsZVVybChmaWxlTGlzdCkNCiAgICB9LA0KICAgIGdldFBhdGgoKXsNCiAgICAgIGxldCBwYXRoID0gJyc7DQoNCiAgICAgIGZvcih2YXIgaT0wO2k8dGhpcy5maWxlcy5sZW5ndGg7aSsrKXsNCiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuZmlsZXNbaV07DQogICAgICAgIGlmKGZpbGUucmVzcG9uc2UudXJsKXsNCiAgICAgICAgICBwYXRoICs9IGZpbGUucmVzcG9uc2UudXJsICsgIjsiDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmKHBhdGgpew0KICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCxwYXRoLmxlbmd0aC0xKQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHBhdGgNCiAgICB9LA0KICAgIGluaXRGaWxlTGlzdCgpew0KICAgICAgaWYodGhpcy5pbWdQYXRoKXsNCiAgICAgICAgbGV0IHBhdGhzID0gdGhpcy5pbWdQYXRoLnNwbGl0KCI7IikNCiAgICAgICAgZm9yKHZhciBpPTA7aTxwYXRocy5sZW5ndGg7aSsrKXsNCg0KICAgICAgICAgIGxldCBwYXRoID0gcGF0aHNbaV07DQogICAgICAgICAgaWYoIXBhdGgpIGNvbnRpbnVlOw0KICAgICAgICAgIGxldCByZXNwb25zZSA9IHsNCiAgICAgICAgICAgIGVycm9yOiAwLA0KICAgICAgICAgICAgdXJsOiBwYXRoDQogICAgICAgICAgfQ0KICAgICAgICAgIGxldCBmaWxlID0gew0KICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLA0KICAgICAgICAgICAgdXJsOiBmaWxlVXJsICsgJy9kb3dubG9hZEZpbGU/cGF0aD0nICtwYXRoDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaChmaWxlKQ0KICAgICAgICB9DQogICAgICB0aGlzLmluaXRGaWxlVXJsKHRoaXMuZmlsZUxpc3QpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdEZpbGVMaXN0KCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["UploadFileMulty.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadFileMulty.vue","sourceRoot":"src/views/Trade/Compents","sourcesContent":["<template>\r\n  <div>\r\n    <el-upload\r\n      :action=\"uploadUrl\"\r\n      list-type=\"picture-card\"\r\n      :file-list=\"fileList\"\r\n      :data=\"data\"\r\n      :on-preview=\"handlePictureCardPreview\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleAvatarSuccess\"\r\n      :before-upload=\"beforeAvatarUpload\">\r\n      <i class=\"el-icon-plus\"></i>\r\n      <div slot=\"tip\" class=\"el-upload__tip\">{{info}}</div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\" append-to-body v-dialog-drag width=\"500px\" >\r\n      <img width=\"100%\" :src=\"imgUrl\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport { fileUrl } from '@/utils/global'\r\nexport default {\r\n  name: 'UploadFileMutly',\r\n  props:{\r\n    model:String,\r\n    imgPath:String,\r\n    info:String\r\n  },\r\n  data() {\r\n    return {\r\n      uploadUrl: fileUrl + '/uploadFile',\r\n      dialogVisible: false,\r\n      disabled: false,\r\n      imgUrl:'',\r\n      files:[],\r\n      fileList:[],\r\n      data:{}\r\n    };\r\n  },\r\n  methods: {\r\n    initFileUrl(fileList){\r\n      this.files = fileList\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.initFileUrl(fileList)\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogVisible = true;\r\n      this.imgUrl = file.url\r\n    },\r\n    beforeAvatarUpload(file){\r\n      const type = file.type\r\n      const isJPG = 'image/jpeg,image/png,image/bmp'.indexOf(type) > -1;\r\n      const isLt2M = file.size / 1024 / 1024 < 10;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传图片只能是 JPG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传图片大小不能超过 10MB!');\r\n      }\r\n      this.data.type = this.model\r\n      this.data.path = file.url\r\n      return isJPG && isLt2M;\r\n    },\r\n    handleAvatarSuccess(res, file,fileList) {\r\n      if(res.error===0){\r\n        file.url = fileUrl + '/downloadFile?path=' +res.url\r\n      }else{\r\n        this.$message.error(\"上传文件失败:\"+ res.message)\r\n      }\r\n      this.initFileUrl(fileList)\r\n    },\r\n    getPath(){\r\n      let path = '';\r\n\r\n      for(var i=0;i<this.files.length;i++){\r\n        const file = this.files[i];\r\n        if(file.response.url){\r\n          path += file.response.url + \";\"\r\n        }\r\n      }\r\n      if(path){\r\n        path = path.substring(0,path.length-1)\r\n      }\r\n      return path\r\n    },\r\n    initFileList(){\r\n      if(this.imgPath){\r\n        let paths = this.imgPath.split(\";\")\r\n        for(var i=0;i<paths.length;i++){\r\n\r\n          let path = paths[i];\r\n          if(!path) continue;\r\n          let response = {\r\n            error: 0,\r\n            url: path\r\n          }\r\n          let file = {\r\n            response: response,\r\n            url: fileUrl + '/downloadFile?path=' +path\r\n          }\r\n          this.fileList.push(file)\r\n        }\r\n      this.initFileUrl(this.fileList)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initFileList()\r\n  }\r\n}\r\n</script>\r\n"]}]}