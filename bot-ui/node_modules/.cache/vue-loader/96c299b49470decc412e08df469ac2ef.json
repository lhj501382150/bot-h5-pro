{"remainingRequest":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\soft\\workspace\\bot-manager\\bot-ui\\src\\views\\Sys\\Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\src\\views\\Sys\\Menu.vue","mtime":1702475008477},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\soft\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgS3RCdXR0b24gZnJvbSAiQC92aWV3cy9Db3JlL0t0QnV0dG9uIjsNCmltcG9ydCBUYWJsZVRyZWVDb2x1bW4gZnJvbSAiQC92aWV3cy9Db3JlL1RhYmxlVHJlZUNvbHVtbiI7DQppbXBvcnQgUG9wdXBUcmVlSW5wdXQgZnJvbSAiQC9jb21wb25lbnRzL1BvcHVwVHJlZUlucHV0IjsNCmltcG9ydCBGYUljb25Ub29sdGlwIGZyb20gIkAvY29tcG9uZW50cy9GYUljb25Ub29sdGlwIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFBvcHVwVHJlZUlucHV0LA0KICAgIEt0QnV0dG9uLA0KICAgIFRhYmxlVHJlZUNvbHVtbiwNCiAgICBGYUljb25Ub29sdGlwDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNpemU6ICJzbWFsbCIsDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGZpbHRlcnM6IHsNCiAgICAgICAgbmFtZTogIiINCiAgICAgIH0sDQogICAgICB0YWJsZVRyZWVEZGF0YTogW10sDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIG1lbnVUeXBlTGlzdDogWyLnm67lvZUiLCAi6I+c5Y2VIiwgIuaMiemSriJdLA0KICAgICAgZGF0YUZvcm06IHsNCiAgICAgICAgaWQ6IDAsDQogICAgICAgIHR5cGU6IDEsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBwYXJlbnRJZDogMCwNCiAgICAgICAgcGFyZW50TmFtZTogIiIsDQogICAgICAgIHVybDogIiIsDQogICAgICAgIHBlcm1zOiAiIiwNCiAgICAgICAgb3JkZXJOdW06IDAsDQogICAgICAgIGljb246ICIiLA0KICAgICAgICBpY29uTGlzdDogW10NCiAgICAgIH0sDQogICAgICBkYXRhUnVsZTogew0KICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuiPnOWNleWQjeensOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9XQ0KICAgICAgfSwNCiAgICAgIHBvcHVwVHJlZURhdGE6IFtdLA0KICAgICAgcG9wdXBUcmVlUHJvcHM6IHsNCiAgICAgICAgbGFiZWw6ICJuYW1lIiwNCiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiINCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5pWw5o2uDQogICAgZmluZFRyZWVEYXRhOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLiRhcGkubWVudS5maW5kTWVudVRyZWUoKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMudGFibGVUcmVlRGRhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgdGhpcy5wb3B1cFRyZWVEYXRhID0gdGhpcy5nZXRQYXJlbnRNZW51VHJlZShyZXMuZGF0YSk7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDojrflj5bkuIrnuqfoj5zljZXmoJENCiAgICBnZXRQYXJlbnRNZW51VHJlZTogZnVuY3Rpb24odGFibGVUcmVlRGRhdGEpIHsNCiAgICAgIGxldCBwYXJlbnQgPSB7DQogICAgICAgIHBhcmVudElkOiAwLA0KICAgICAgICBuYW1lOiAi6aG257qn6I+c5Y2VIiwNCiAgICAgICAgY2hpbGRyZW46IHRhYmxlVHJlZURkYXRhDQogICAgICB9Ow0KICAgICAgcmV0dXJuIFtwYXJlbnRdOw0KICAgIH0sDQogICAgLy8g5pi+56S65paw5aKe55WM6Z2iDQogICAgaGFuZGxlQWRkOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmRhdGFGb3JtID0gew0KICAgICAgICBpZDogMCwNCiAgICAgICAgdHlwZTogMSwNCiAgICAgICAgdHlwZUxpc3Q6IFsi55uu5b2VIiwgIuiPnOWNlSIsICLmjInpkq4iXSwNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIHBhcmVudElkOiAwLA0KICAgICAgICBwYXJlbnROYW1lOiAiIiwNCiAgICAgICAgdXJsOiAiIiwNCiAgICAgICAgcGVybXM6ICIiLA0KICAgICAgICBvcmRlck51bTogMCwNCiAgICAgICAgaWNvbjogIiIsDQogICAgICAgIGljb25MaXN0OiBbXQ0KICAgICAgfTsNCiAgICB9LA0KICAgIC8vIOaYvuekuue8lui+keeVjOmdog0KICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uKHJvdykgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5kYXRhRm9ybSwgcm93KTsNCiAgICB9LA0KICAgIC8vIOWIoOmZpA0KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruiupOWIoOmZpOmAieS4reiusOW9leWQl++8nyIsICLmj5DnpLoiLCB7DQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIg0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIGxldCBwYXJhbXMgPSB0aGlzLmdldERlbGV0ZUlkcyhbXSwgcm93KTsNCiAgICAgICAgdGhpcy4kYXBpLm1lbnUuYmF0Y2hEZWxldGUocGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy5maW5kVHJlZURhdGEoKTsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyIsIHR5cGU6ICJzdWNjZXNzIiB9KTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOiOt+WPluWIoOmZpOeahOWMheWQq+WtkOiPnOWNleeahGlk5YiX6KGoDQogICAgZ2V0RGVsZXRlSWRzKGlkcywgcm93KSB7DQogICAgICBpZHMucHVzaCh7IGlkOiByb3cuaWQgfSk7DQogICAgICBpZiAocm93LmNoaWxkcmVuICE9IG51bGwpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHJvdy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykgew0KICAgICAgICAgIHRoaXMuZ2V0RGVsZXRlSWRzKGlkcywgcm93LmNoaWxkcmVuW2ldKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGlkczsNCiAgICB9LA0KICAgIC8vIOiPnOWNleagkemAieS4rQ0KICAgIGhhbmRsZVRyZWVTZWxlY3RDaGFuZ2UoZGF0YSwgbm9kZSkgew0KICAgICAgdGhpcy5kYXRhRm9ybS5wYXJlbnRJZCA9IGRhdGEuaWQ7DQogICAgICB0aGlzLmRhdGFGb3JtLnBhcmVudE5hbWUgPSBkYXRhLm5hbWU7DQogICAgfSwNCiAgICAvLyDlm77moIfpgInkuK0NCiAgICBpY29uQWN0aXZlSGFuZGxlKGljb25OYW1lKSB7DQogICAgICB0aGlzLmRhdGFGb3JtLmljb24gPSBpY29uTmFtZTsNCiAgICB9LA0KICAgIC8vIOihqOWNleaPkOS6pA0KICAgIHN1Ym1pdEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzWyJkYXRhRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdGhpcy4kY29uZmlybSgi56Gu6K6k5o+Q5Lqk5ZCX77yfIiwgIuaPkOekuiIsIHt9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuZWRpdExvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGF0YUZvcm0pOw0KICAgICAgICAgICAgdGhpcy4kYXBpLm1lbnUuc2F2ZShwYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5lZGl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLmk43kvZzmiJDlip8iLCB0eXBlOiAic3VjY2VzcyIgfSk7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1siZGF0YUZvcm0iXS5yZXNldEZpZWxkcygpOw0KICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOWksei0pSwgIiArIHJlcy5tc2csDQogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy5maW5kVHJlZURhdGEoKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5maW5kVHJlZURhdGEoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menu.vue","sourceRoot":"src/views/Sys","sourcesContent":["<template>\r\n  <div class=\"page-container\">\r\n\t<!--工具栏-->\r\n\t<div class=\"toolbar\" style=\"float:left;padding-top:10px;padding-left:15px;\">\r\n\t\t<el-form :inline=\"true\" :model=\"filters\" :size=\"size\">\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-input v-model=\"filters.name\" placeholder=\"名称\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<kt-button icon=\"fa fa-search\" :label=\"$t('action.search')\" perms=\"sys:menu:view\" type=\"primary\" @click=\"findTreeData(null)\"/>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<kt-button icon=\"fa fa-plus\" :label=\"$t('action.add')\" perms=\"sys:menu:add\" type=\"primary\" @click=\"handleAdd\"/>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n\t<!--表格树内容栏-->\r\n    <el-table :data=\"tableTreeDdata\" stripe size=\"mini\" style=\"width: 100%;\"\r\n      v-loading=\"loading\" rowKey=\"id\" element-loading-text=\"$t('action.loading')\">\r\n      <el-table-column\r\n        prop=\"id\" header-align=\"center\" align=\"center\" width=\"80\" label=\"ID\">\r\n      </el-table-column>\r\n      <table-tree-column \r\n        prop=\"name\" header-align=\"center\" treeKey=\"id\" width=\"150\" label=\"名称\">\r\n      </table-tree-column>\r\n      <el-table-column header-align=\"center\" align=\"center\" label=\"图标\">\r\n        <template slot-scope=\"scope\">\r\n          <i :class=\"scope.row.icon || ''\"></i>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"type\" header-align=\"center\" align=\"center\" label=\"类型\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag v-if=\"scope.row.type === 0\" size=\"small\">目录</el-tag>\r\n          <el-tag v-else-if=\"scope.row.type === 1\" size=\"small\" type=\"success\">菜单</el-tag>\r\n          <el-tag v-else-if=\"scope.row.type === 2\" size=\"small\" type=\"info\">按钮</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column \r\n        prop=\"parentName\" header-align=\"center\" align=\"center\" width=\"120\" label=\"上级菜单\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"url\" header-align=\"center\" align=\"center\" width=\"150\" \r\n        :show-overflow-tooltip=\"true\" label=\"菜单URL\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"perms\" header-align=\"center\" align=\"center\" width=\"150\" \r\n        :show-overflow-tooltip=\"true\" label=\"授权标识\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"orderNum\" header-align=\"center\" align=\"center\" label=\"排序\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        fixed=\"right\" header-align=\"center\" align=\"center\" width=\"185\" :label=\"$t('action.operation')\">\r\n        <template slot-scope=\"scope\">\r\n          <kt-button icon=\"fa fa-edit\" :label=\"$t('action.edit')\" perms=\"sys:menu:edit\" @click=\"handleEdit(scope.row)\"/>\r\n          <kt-button icon=\"fa fa-trash\" :label=\"$t('action.delete')\" perms=\"sys:menu:delete\" type=\"danger\" @click=\"handleDelete(scope.row)\"/>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 新增修改界面 -->\r\n    <el-dialog :title=\"!dataForm.id ? '新增' : '修改'\" width=\"40%\" :visible.sync=\"dialogVisible\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"submitForm()\" \r\n        label-width=\"80px\" :size=\"size\" style=\"text-align:left;\">\r\n        <el-form-item label=\"菜单类型\" prop=\"type\">\r\n          <el-radio-group v-model=\"dataForm.type\">\r\n            <el-radio v-for=\"(type, index) in menuTypeList\" :label=\"index\" :key=\"index\">{{ type }}</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item :label=\"menuTypeList[dataForm.type] + '名称'\" prop=\"name\">\r\n          <el-input v-model=\"dataForm.name\" :placeholder=\"menuTypeList[dataForm.type] + '名称'\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"上级菜单\" prop=\"parentName\">\r\n            <popup-tree-input \r\n              :data=\"popupTreeData\" :props=\"popupTreeProps\" :prop=\"dataForm.parentName==null||dataForm.parentName==''?'顶级菜单':dataForm.parentName\" \r\n              :nodeKey=\"''+dataForm.parentId\" :currentChangeHandle=\"handleTreeSelectChange\">\r\n            </popup-tree-input>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"dataForm.type !== 0\" label=\"授权标识\" prop=\"perms\">\r\n          <el-input v-model=\"dataForm.perms\" placeholder=\"如: sys:user:add, sys:user:edit, sys:user:delete\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"dataForm.type === 1\" label=\"菜单路由\" prop=\"url\">\r\n          <el-row>\r\n            <el-col :span=\"22\">\r\n                <el-input v-model=\"dataForm.url\" placeholder=\"菜单路由\"></el-input>\r\n            </el-col>\r\n            <el-col :span=\"2\" class=\"icon-list__tips\">\r\n                <el-tooltip placement=\"top\" effect=\"light\" style=\"padding: 10px;\">\r\n                  <div slot=\"content\">\r\n                    <p>URL格式：</p>\r\n                    <p>1.常规业务开发的功能URL，如用户管理，Views目录下页面路径为 /Sys/User, 此处填写 /sys/user。</p>\r\n                    <p>2.嵌套外部网页，如通过菜单打开百度网页，此处填写 http://www.baidu.com，http:// 不可省略。</p>\r\n                    <p>示例：用户管理：/sys/user 嵌套百度：http://www.baidu.com 嵌套网页：http://127.0.0.1:8000</p></div>\r\n                  <i class=\"el-icon-warning\"></i>\r\n                </el-tooltip>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"dataForm.type !== 2\" label=\"排序编号\" prop=\"orderNum\">\r\n          <el-input-number v-model=\"dataForm.orderNum\" controls-position=\"right\" :min=\"0\" label=\"排序编号\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"dataForm.type !== 2\" label=\"菜单图标\" prop=\"icon\">\r\n          <el-row>\r\n            <el-col :span=\"22\">\r\n              <!-- <el-popover\r\n                ref=\"iconListPopover\"\r\n                placement=\"bottom-start\"\r\n                trigger=\"click\"\r\n                popper-class=\"mod-menu__icon-popover\">\r\n                <div class=\"mod-menu__icon-list\">\r\n                  <el-button\r\n                    v-for=\"(item, index) in dataForm.iconList\"\r\n                    :key=\"index\"\r\n                    @click=\"iconActiveHandle(item)\"\r\n                    :class=\"{ 'is-active': item === dataForm.icon }\">\r\n                    <icon-svg :name=\"item\"></icon-svg>\r\n                  </el-button>\r\n                </div>\r\n              </el-popover> -->\r\n              <el-input v-model=\"dataForm.icon\" v-popover:iconListPopover :readonly=\"false\" placeholder=\"菜单图标名称（如：fa fa-home fa-lg）\" class=\"icon-list__input\"></el-input>\r\n            </el-col>\r\n            <el-col :span=\"2\" class=\"icon-list__tips\">\r\n              <fa-icon-tooltip />\r\n            </el-col>\r\n          </el-row>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button :size=\"size\"  @click=\"dialogVisible = false\">{{$t('action.cancel')}}</el-button>\r\n        <el-button :size=\"size\"  type=\"primary\" @click=\"submitForm()\">{{$t('action.comfirm')}}</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport KtButton from \"@/views/Core/KtButton\";\r\nimport TableTreeColumn from \"@/views/Core/TableTreeColumn\";\r\nimport PopupTreeInput from \"@/components/PopupTreeInput\";\r\nimport FaIconTooltip from \"@/components/FaIconTooltip\";\r\nexport default {\r\n  components: {\r\n    PopupTreeInput,\r\n    KtButton,\r\n    TableTreeColumn,\r\n    FaIconTooltip\r\n  },\r\n  data() {\r\n    return {\r\n      size: \"small\",\r\n      loading: false,\r\n      filters: {\r\n        name: \"\"\r\n      },\r\n      tableTreeDdata: [],\r\n      dialogVisible: false,\r\n      menuTypeList: [\"目录\", \"菜单\", \"按钮\"],\r\n      dataForm: {\r\n        id: 0,\r\n        type: 1,\r\n        name: \"\",\r\n        parentId: 0,\r\n        parentName: \"\",\r\n        url: \"\",\r\n        perms: \"\",\r\n        orderNum: 0,\r\n        icon: \"\",\r\n        iconList: []\r\n      },\r\n      dataRule: {\r\n        name: [{ required: true, message: \"菜单名称不能为空\", trigger: \"blur\" }]\r\n      },\r\n      popupTreeData: [],\r\n      popupTreeProps: {\r\n        label: \"name\",\r\n        children: \"children\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    // 获取数据\r\n    findTreeData: function() {\r\n      this.loading = true;\r\n      this.$api.menu.findMenuTree().then(res => {\r\n        this.tableTreeDdata = res.data;\r\n        this.popupTreeData = this.getParentMenuTree(res.data);\r\n        this.loading = false;\r\n      });\r\n    },\r\n    // 获取上级菜单树\r\n    getParentMenuTree: function(tableTreeDdata) {\r\n      let parent = {\r\n        parentId: 0,\r\n        name: \"顶级菜单\",\r\n        children: tableTreeDdata\r\n      };\r\n      return [parent];\r\n    },\r\n    // 显示新增界面\r\n    handleAdd: function() {\r\n      this.dialogVisible = true;\r\n      this.dataForm = {\r\n        id: 0,\r\n        type: 1,\r\n        typeList: [\"目录\", \"菜单\", \"按钮\"],\r\n        name: \"\",\r\n        parentId: 0,\r\n        parentName: \"\",\r\n        url: \"\",\r\n        perms: \"\",\r\n        orderNum: 0,\r\n        icon: \"\",\r\n        iconList: []\r\n      };\r\n    },\r\n    // 显示编辑界面\r\n    handleEdit: function(row) {\r\n      this.dialogVisible = true;\r\n      Object.assign(this.dataForm, row);\r\n    },\r\n    // 删除\r\n    handleDelete(row) {\r\n      this.$confirm(\"确认删除选中记录吗？\", \"提示\", {\r\n        type: \"warning\"\r\n      }).then(() => {\r\n        let params = this.getDeleteIds([], row);\r\n        this.$api.menu.batchDelete(params).then(res => {\r\n          this.findTreeData();\r\n          this.$message({ message: \"删除成功\", type: \"success\" });\r\n        });\r\n      });\r\n    },\r\n    // 获取删除的包含子菜单的id列表\r\n    getDeleteIds(ids, row) {\r\n      ids.push({ id: row.id });\r\n      if (row.children != null) {\r\n        for (let i = 0, len = row.children.length; i < len; i++) {\r\n          this.getDeleteIds(ids, row.children[i]);\r\n        }\r\n      }\r\n      return ids;\r\n    },\r\n    // 菜单树选中\r\n    handleTreeSelectChange(data, node) {\r\n      this.dataForm.parentId = data.id;\r\n      this.dataForm.parentName = data.name;\r\n    },\r\n    // 图标选中\r\n    iconActiveHandle(iconName) {\r\n      this.dataForm.icon = iconName;\r\n    },\r\n    // 表单提交\r\n    submitForm() {\r\n      this.$refs[\"dataForm\"].validate(valid => {\r\n        if (valid) {\r\n          this.$confirm(\"确认提交吗？\", \"提示\", {}).then(() => {\r\n            this.editLoading = true;\r\n            let params = Object.assign({}, this.dataForm);\r\n            this.$api.menu.save(params).then(res => {\r\n              this.editLoading = false;\r\n              if (res.code == 200) {\r\n                this.$message({ message: \"操作成功\", type: \"success\" });\r\n                this.$refs[\"dataForm\"].resetFields();\r\n                this.dialogVisible = false;\r\n              } else {\r\n                this.$message({\r\n                  message: \"操作失败, \" + res.msg,\r\n                  type: \"error\"\r\n                });\r\n              }\r\n              this.findTreeData();\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.findTreeData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}