{"remainingRequest":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\bot-manager\\bot-ui\\src\\views\\Money\\Moneychangeadd.vue?vue&type=style&index=0&id=2e5842ba&scoped=true&lang=css&","dependencies":[{"path":"D:\\workspace\\bot-manager\\bot-ui\\src\\views\\Money\\Moneychangeadd.vue","mtime":1702475008451},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-manager\\bot-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoudGV4dCB7DQogIGZvbnQtc2l6ZTogMTRweDsNCn0NCg0KLml0ZW0gew0KICBtYXJnaW4tYm90dG9tOiAxOHB4Ow0KfQ0KLmNsZWFyZml4ew0KICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KLmNsZWFyZml4OmJlZm9yZSwNCi5jbGVhcmZpeDphZnRlciB7DQogIGRpc3BsYXk6IHRhYmxlOw0KICBjb250ZW50OiAiIjsNCn0NCi5jbGVhcmZpeDphZnRlciB7DQogIGNsZWFyOiBib3RoDQp9DQoNCi5ib3gtY2FyZCB7DQogIHdpZHRoOiA1MCU7DQp9DQo="},{"version":3,"sources":["Moneychangeadd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Moneychangeadd.vue","sourceRoot":"src/views/Money","sourcesContent":["<template>\r\n  <el-card class=\"box-card\" shadow=\"never\">\r\n    <div slot=\"header\" class=\"clearfix\">\r\n      <span>手工调账</span>\r\n    </div>\r\n    <div  class=\"text item\">\r\n      <el-form :model=\"dataForm\" label-width=\"80px\" :rules=\"dataFormRules\" ref=\"dataForm\" :size=\"size\" label-position=\"right\">\r\n        <el-form-item label=\"客户编号\" prop=\"userno\" >\r\n          <el-select v-model=\"dataForm.userno\" style=\"width: 100%\" filterable clearable @change=\"getUserMoney\">\r\n            <el-option v-for=\"item in users\" :key=\"item.userno\" :value=\"item.userno\" :label=\"item.userno + '-' + item.username  + '-' + item.nickname\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"当前余额\" >\r\n          <el-input v-model=\"dataForm.leftmoney\" :readonly=\"true\"></el-input>\r\n        </el-form-item>\r\n        <!-- <el-form-item label=\"账户编号\" prop=\"acctno\" >\r\n          <el-select v-model=\"dataForm.acctno\" style=\"width: 100%\">\r\n            <el-option v-for=\"item in accts\" :key=\"item.acctno\" :value=\"item.acctno\" :label=\"item.acctname\"></el-option>\r\n          </el-select>\r\n        </el-form-item> -->\r\n        <el-form-item label=\"科目编号\" prop=\"subno\">\r\n          <el-select v-model=\"dataForm.subno\" style=\"width: 100%\">\r\n            <el-option v-for=\"item in subs\" :key=\"item.sunno\" :value=\"item.sunno\" :label=\"item.subname\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"变动金额\" prop=\"chmoney\"  >\r\n          <el-input v-model=\"dataForm.chmoney\" maxlength=\"8\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述信息\" prop=\"memo\"  >\r\n          <el-input v-model=\"dataForm.memo\" maxlength=\"64\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button :size=\"size\" @click.native=\"clearForm\">{{$t('action.cancel')}}</el-button>\r\n        <el-button :size=\"size\" type=\"primary\" @click.native=\"submitForm\" :loading=\"editLoading\">{{$t('action.submit')}}</el-button>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    var validateNumber = (rule, value, callback) => {\r\n      var regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\r\n      if (regPos.test(value)) {\r\n        callback();\r\n      } else {\r\n        callback(new Error('变动金额只能输入数字'));\r\n      }\r\n    };\r\n    return {\r\n      size: 'small',\r\n      editLoading: false,\r\n      dataFormRules: {\r\n        userno: [\r\n          { required: true, message: '请输入客户编号', trigger: 'blur' }\r\n        ],\r\n        // acctno: [\r\n        //   { required: true, message: '请选择账户', trigger: 'blur' }\r\n        // ],\r\n        subno: [\r\n          { required: true, message: '请选择科目', trigger: 'blur' }\r\n        ],\r\n        chmoney: [\r\n          { required: true, message: '请输入变动金额', trigger: 'blur' },\r\n          {validator:validateNumber,trigger: 'blur'}\r\n        ],\r\n        // memo: [\r\n        //   { required: true, message: '请输入描述信息', trigger: 'blur' }\r\n        // ]\r\n      },\r\n      // 新增编辑界面数据\r\n      dataForm: {\r\n        userno: '',\r\n        acctno: 100,\r\n        subno: '',\r\n        chmoney: 0,\r\n        exten: '',\r\n        memo: '',\r\n        leftmoney:0\r\n      },\r\n      accts:[],\r\n      subs:[],\r\n      users:[]\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    getUserMoney(val){\r\n      this.leftmoney = 0;\r\n      if(val){\r\n        let para = {\r\n          userno:val,\r\n          acctno:'100'\r\n        }\r\n        this.$api.usermoney.getOne(para).then(res =>{\r\n          this.dataForm.leftmoney = res.data.balance\r\n        })\r\n      }\r\n    },\r\n    //查询账本信息\r\n    findAcct(){\r\n      let para = {}\r\n      this.$api.account.findList(para).then(res =>{\r\n        this.accts = res.data\r\n      })\r\n    },\r\n    findSubs(){\r\n      let para = {}\r\n      this.$api.subject.findList(para).then(res =>{\r\n        this.subs = res.data\r\n      })\r\n    },\r\n    findUser(){\r\n      let para = {}\r\n      this.$api.firm.findList(para).then(res =>{\r\n        this.users = res.data\r\n      })\r\n    },\r\n    submitForm: function () {\r\n      this.$refs.dataForm.validate((valid) => {\r\n        if (valid) {\r\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\r\n            this.editLoading = true\r\n            let params = Object.assign({}, this.dataForm)\r\n            this.$api.changeapply.save(params).then((res) => {\r\n              this.editLoading = false\r\n              if(res.code == 200) {\r\n                this.$message({ message: '操作成功', type: 'success' })\r\n                this.$refs['dataForm'].resetFields()\r\n                this.dataForm.leftmoney = 0\r\n              } else {\r\n                this.$message({message: '操作失败, ' + res.msg, type: 'error'})\r\n              }\r\n            })\r\n\r\n          })\r\n        }\r\n      })\r\n    },\r\n    clearForm(){\r\n      this.$refs['dataForm'].resetFields()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.findAcct()\r\n    this.findSubs()\r\n    this.findUser()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n}\r\n.clearfix{\r\n  text-align: left;\r\n}\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 50%;\r\n}\r\n</style>\r\n"]}]}