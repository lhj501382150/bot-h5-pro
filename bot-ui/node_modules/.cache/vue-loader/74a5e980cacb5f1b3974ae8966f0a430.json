{"remainingRequest":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\bot-h5\\bot-ui\\src\\views\\Hisquery\\Moneychangeadd.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\bot-h5\\bot-ui\\src\\views\\Hisquery\\Moneychangeadd.vue","mtime":1702475008451},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\bot-h5\\bot-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICB2YXIgdmFsaWRhdGVOdW1iZXIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICB2YXIgcmVnUG9zID0gL15cZCsoXC5cZCspPyQvOyAvL+mdnui0n+a1rueCueaVsA0KICAgICAgaWYgKHJlZ1Bvcy50ZXN0KHZhbHVlKSkgew0KICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCflj5jliqjph5Hpop3lj6rog73ovpPlhaXmlbDlrZcnKSk7DQogICAgICB9DQogICAgfTsNCiAgICByZXR1cm4gew0KICAgICAgc2l6ZTogJ3NtYWxsJywNCiAgICAgIGVkaXRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIGRhdGFGb3JtUnVsZXM6IHsNCiAgICAgICAgdXNlcm5vOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWuouaIt+e8luWPtycsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIC8vIGFjY3RubzogWw0KICAgICAgICAvLyAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6notKbmiLcnLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICAvLyBdLA0KICAgICAgICBzdWJubzogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nnp5Hnm64nLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICBjaG1vbmV5OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWPmOWKqOmHkeminScsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHt2YWxpZGF0b3I6dmFsaWRhdGVOdW1iZXIsdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICAvLyBtZW1vOiBbDQogICAgICAgIC8vICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaPj+i/sOS/oeaBrycsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIC8vIF0NCiAgICAgIH0sDQogICAgICAvLyDmlrDlop7nvJbovpHnlYzpnaLmlbDmja4NCiAgICAgIGRhdGFGb3JtOiB7DQogICAgICAgIHVzZXJubzogJycsDQogICAgICAgIGFjY3RubzogMTAwLA0KICAgICAgICBzdWJubzogJycsDQogICAgICAgIGNobW9uZXk6IDAsDQogICAgICAgIGV4dGVuOiAnJywNCiAgICAgICAgbWVtbzogJycsDQogICAgICAgIGxlZnRtb25leTowDQogICAgICB9LA0KICAgICAgYWNjdHM6W10sDQogICAgICBzdWJzOltdLA0KICAgICAgdXNlcnM6W10NCg0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczp7DQogICAgZ2V0VXNlck1vbmV5KHZhbCl7DQogICAgICB0aGlzLmxlZnRtb25leSA9IDA7DQogICAgICBpZih2YWwpew0KICAgICAgICBsZXQgcGFyYSA9IHsNCiAgICAgICAgICB1c2Vybm86dmFsLA0KICAgICAgICAgIGFjY3RubzonMTAwJw0KICAgICAgICB9DQogICAgICAgIHRoaXMuJGFwaS51c2VybW9uZXkuZ2V0T25lKHBhcmEpLnRoZW4ocmVzID0+ew0KICAgICAgICAgIHRoaXMuZGF0YUZvcm0ubGVmdG1vbmV5ID0gcmVzLmRhdGEuYmFsYW5jZQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/mn6Xor6LotKbmnKzkv6Hmga8NCiAgICBmaW5kQWNjdCgpew0KICAgICAgbGV0IHBhcmEgPSB7fQ0KICAgICAgdGhpcy4kYXBpLmFjY291bnQuZmluZExpc3QocGFyYSkudGhlbihyZXMgPT57DQogICAgICAgIHRoaXMuYWNjdHMgPSByZXMuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGZpbmRTdWJzKCl7DQogICAgICBsZXQgcGFyYSA9IHt9DQogICAgICB0aGlzLiRhcGkuc3ViamVjdC5maW5kTGlzdChwYXJhKS50aGVuKHJlcyA9PnsNCiAgICAgICAgdGhpcy5zdWJzID0gcmVzLmRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICBmaW5kVXNlcigpew0KICAgICAgbGV0IHBhcmEgPSB7fQ0KICAgICAgdGhpcy4kYXBpLmZpcm0uZmluZExpc3QocGFyYSkudGhlbihyZXMgPT57DQogICAgICAgIHRoaXMudXNlcnMgPSByZXMuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOaPkOS6pOWQl++8nycsICfmj5DnpLonLCB7fSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmVkaXRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGF0YUZvcm0pDQogICAgICAgICAgICB0aGlzLiRhcGkuY2hhbmdlYXBwbHkuc2F2ZShwYXJhbXMpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICB0aGlzLmVkaXRMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgICAgaWYocmVzLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICfmk43kvZzmiJDlip8nLCB0eXBlOiAnc3VjY2VzcycgfSkNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnJlc2V0RmllbGRzKCkNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFGb3JtLmxlZnRtb25leSA9IDANCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHttZXNzYWdlOiAn5pON5L2c5aSx6LSlLCAnICsgcmVzLm1zZywgdHlwZTogJ2Vycm9yJ30pDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgY2xlYXJGb3JtKCl7DQogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnJlc2V0RmllbGRzKCkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5maW5kQWNjdCgpDQogICAgdGhpcy5maW5kU3VicygpDQogICAgdGhpcy5maW5kVXNlcigpDQogIH0NCn0NCg=="},{"version":3,"sources":["Moneychangeadd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Moneychangeadd.vue","sourceRoot":"src/views/Hisquery","sourcesContent":["<template>\r\n  <el-card class=\"box-card\" shadow=\"never\">\r\n    <div slot=\"header\" class=\"clearfix\">\r\n      <span>手工调账</span>\r\n    </div>\r\n    <div  class=\"text item\">\r\n      <el-form :model=\"dataForm\" label-width=\"80px\" :rules=\"dataFormRules\" ref=\"dataForm\" :size=\"size\" label-position=\"right\">\r\n        <el-form-item label=\"客户编号\" prop=\"userno\" >\r\n          <el-select v-model=\"dataForm.userno\" style=\"width: 100%\" filterable clearable @change=\"getUserMoney\">\r\n            <el-option v-for=\"item in users\" :key=\"item.userno\" :value=\"item.userno\" :label=\"item.userno + '-' + item.username  + '-' + item.nickname\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"当前余额\" >\r\n          <el-input v-model=\"dataForm.leftmoney\" :readonly=\"true\"></el-input>\r\n        </el-form-item>\r\n        <!-- <el-form-item label=\"账户编号\" prop=\"acctno\" >\r\n          <el-select v-model=\"dataForm.acctno\" style=\"width: 100%\">\r\n            <el-option v-for=\"item in accts\" :key=\"item.acctno\" :value=\"item.acctno\" :label=\"item.acctname\"></el-option>\r\n          </el-select>\r\n        </el-form-item> -->\r\n        <el-form-item label=\"科目编号\" prop=\"subno\">\r\n          <el-select v-model=\"dataForm.subno\" style=\"width: 100%\">\r\n            <el-option v-for=\"item in subs\" :key=\"item.sunno\" :value=\"item.sunno\" :label=\"item.subname\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"变动金额\" prop=\"chmoney\"  >\r\n          <el-input v-model=\"dataForm.chmoney\" maxlength=\"8\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述信息\" prop=\"memo\"  >\r\n          <el-input v-model=\"dataForm.memo\" maxlength=\"64\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button :size=\"size\" @click.native=\"clearForm\">{{$t('action.cancel')}}</el-button>\r\n        <el-button :size=\"size\" type=\"primary\" @click.native=\"submitForm\" :loading=\"editLoading\">{{$t('action.submit')}}</el-button>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    var validateNumber = (rule, value, callback) => {\r\n      var regPos = /^\\d+(\\.\\d+)?$/; //非负浮点数\r\n      if (regPos.test(value)) {\r\n        callback();\r\n      } else {\r\n        callback(new Error('变动金额只能输入数字'));\r\n      }\r\n    };\r\n    return {\r\n      size: 'small',\r\n      editLoading: false,\r\n      dataFormRules: {\r\n        userno: [\r\n          { required: true, message: '请输入客户编号', trigger: 'blur' }\r\n        ],\r\n        // acctno: [\r\n        //   { required: true, message: '请选择账户', trigger: 'blur' }\r\n        // ],\r\n        subno: [\r\n          { required: true, message: '请选择科目', trigger: 'blur' }\r\n        ],\r\n        chmoney: [\r\n          { required: true, message: '请输入变动金额', trigger: 'blur' },\r\n          {validator:validateNumber,trigger: 'blur'}\r\n        ],\r\n        // memo: [\r\n        //   { required: true, message: '请输入描述信息', trigger: 'blur' }\r\n        // ]\r\n      },\r\n      // 新增编辑界面数据\r\n      dataForm: {\r\n        userno: '',\r\n        acctno: 100,\r\n        subno: '',\r\n        chmoney: 0,\r\n        exten: '',\r\n        memo: '',\r\n        leftmoney:0\r\n      },\r\n      accts:[],\r\n      subs:[],\r\n      users:[]\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    getUserMoney(val){\r\n      this.leftmoney = 0;\r\n      if(val){\r\n        let para = {\r\n          userno:val,\r\n          acctno:'100'\r\n        }\r\n        this.$api.usermoney.getOne(para).then(res =>{\r\n          this.dataForm.leftmoney = res.data.balance\r\n        })\r\n      }\r\n    },\r\n    //查询账本信息\r\n    findAcct(){\r\n      let para = {}\r\n      this.$api.account.findList(para).then(res =>{\r\n        this.accts = res.data\r\n      })\r\n    },\r\n    findSubs(){\r\n      let para = {}\r\n      this.$api.subject.findList(para).then(res =>{\r\n        this.subs = res.data\r\n      })\r\n    },\r\n    findUser(){\r\n      let para = {}\r\n      this.$api.firm.findList(para).then(res =>{\r\n        this.users = res.data\r\n      })\r\n    },\r\n    submitForm: function () {\r\n      this.$refs.dataForm.validate((valid) => {\r\n        if (valid) {\r\n          this.$confirm('确认提交吗？', '提示', {}).then(() => {\r\n            this.editLoading = true\r\n            let params = Object.assign({}, this.dataForm)\r\n            this.$api.changeapply.save(params).then((res) => {\r\n              this.editLoading = false\r\n              if(res.code == 200) {\r\n                this.$message({ message: '操作成功', type: 'success' })\r\n                this.$refs['dataForm'].resetFields()\r\n                this.dataForm.leftmoney = 0\r\n              } else {\r\n                this.$message({message: '操作失败, ' + res.msg, type: 'error'})\r\n              }\r\n            })\r\n\r\n          })\r\n        }\r\n      })\r\n    },\r\n    clearForm(){\r\n      this.$refs['dataForm'].resetFields()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.findAcct()\r\n    this.findSubs()\r\n    this.findUser()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n}\r\n.clearfix{\r\n  text-align: left;\r\n}\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 50%;\r\n}\r\n</style>\r\n"]}]}